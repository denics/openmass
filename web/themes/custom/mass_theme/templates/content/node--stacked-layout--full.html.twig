{#
/**
 * @file
 * Theme override to display the Full view mode of the Subtopic content type.
 *
 * Uses 'extend' methods from http://www.stevector.com/2013/10/make-your-drupal-8-theme-easier-to-maintain-with-this-one-weird-trick-twigs-extends-concept/
 *
 * @copyright Copyright (c) 2016 Palantir.net
 */
 #}
{%
set illustratedHeader = {
  'bgTitle': image_alt,
  'bgImage': image_url,
  'category': content.field_label|field_value,
  'pageHeader': {
    'title': label|field_value,
    'subTitle': '',
    'rteElements': [{
      'path': '@atoms/11-text/paragraph.twig',
      'data': {
        'paragraph' : {
          'text': content.field_lede|field_value
        }
      }
    }],
    'headerTags': ''
  }
}
%}

{%
set suggestedPages = {
  'title': 'Related Guides'|t,
  'pages': related_content
}
%}

{% extends 'node.html.twig' %}

{% block preContent %}
  {# include 'organisms-breadcrumbs' with {breadcrumb:{class:'ma__breadcrumbs--page'}} #}
  {# Breadcrumbs have been descoped from pilot, but they'd go here #}
  {# drupal_block('breadcrumbs') #}
  {% if content.field_action_header|field_value is not empty or content.field_header_cta|field_value is not empty %}
      {% include "@mass_theme/includes/organisms-page-action-header.html.twig" %}
  {% else %}
      {% include '@organisms/by-template/illustrated-header.twig' %}
  {% endif %}
  {% if content.field_action_banner|render|trim is not empty %}
      {{ content.field_action_banner|field_value }}
  {% endif %}
{% endblock %}

{% block main %}
  {{ content.field_bands }}
{% endblock %}

{% block postContent %}
  {% if related_content is not empty %}
    {% include '@custom_includes/organisms-suggested-pages.html.twig' with suggestedPages %}
  {% endif %}
{% endblock %}
